<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drone Swarm Wildfire Technology</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes float {
            0% { 
                transform: translateY(0px) translateX(0px); 
            }
            50% { 
                transform: translateY(-20px) translateX(10px); 
            }
            100% {
                transform: translateY(0px) translateX(0px); 
            }
        }
        @keyframes pulse-glow {
            0% { 
                opacity: 0.3; 
            }
            50% { 
                opacity: 0.6; 
            }
            100% {
                opacity: 0.3; 
            }
        }
        .float-animation {
            animation: float ease-in-out infinite;
        }
        .pulse-particle {
            animation: pulse-glow ease-in-out infinite;
        }
</style>
    <!-- Hero Section -->
    <div class="relative h-screen flex items-center justify-center overflow-hidden">
        <div class="absolute inset-0">
            <img src="55fff06d-b91f-49d4-928e-d7d7f34d97c5.jpg" alt="Drones fighting wildfire" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-b from-slate-900/60 via-slate-900/40 to-slate-900"></div>
        </div>

        <div id="floatingDrones" class="absolute inset-0 pointer-events-none"></div>

        <div id="heroContent" class="relative z-10 text-center px-6 max-w-5xl">
            <div class="inline-block px-4 py-2 bg-orange-500/20 backdrop-blur-sm border border-orange-500/30 rounded-full mb-6">
                <span class="text-orange-300 text-sm font-semibold tracking-wider">NEXT-GEN FIREFIGHTING</span>
            </div>
            <h1 class="text-6xl md:text-8xl font-bold mb-6 bg-gradient-to-r from-white via-orange-100 to-red-200 bg-clip-text text-transparent">
                Swarm Intelligence
            </h1>
            <p class="text-xl md:text-2xl text-gray-200 mb-8 max-w-3xl mx-auto">
                Autonomous drone networks that coordinate in real-time to combat wildfires with unprecedented efficiency
            </p>
            <button class="px-8 py-4 bg-gradient-to-r from-orange-500 to-red-600 rounded-full font-semibold text-lg shadow-2xl shadow-orange-500/50 hover:shadow-orange-500/70 transform hover:scale-105 transition-all duration-300">
                Explore Technology
            </button>
        </div>

        <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce">
            <div class="w-6 h-10 border-2 border-white/30 rounded-full flex justify-center">
                <div class="w-1.5 h-3 bg-white/50 rounded-full mt-2 animate-pulse"></div>
            </div>
        </div>
    </div>

    <!-- Info Section -->
    <div class="relative py-24 px-6 bg-[#0A0A1A] text-white">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-20">
                <h2 class="text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-orange-400 to-red-500 bg-clip-text text-transparent">
                    How It Works
                </h2>
                <p class="text-xl text-gray-400 max-w-3xl mx-auto">
                    Distributed intelligence meets wildfire response. Our swarm technology enables drones to operate as a unified, adaptive system.
                </p>
            </div>

            <div class="grid md:grid-cols-3 gap-8 mb-24">
                <div class="group bg-gradient-to-br from-slate-800 to-slate-900 p-8 rounded-2xl border border-slate-700 hover:border-orange-500/50 transition-all duration-300 hover:transform hover:scale-105">
                    <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl flex items-center justify-center mb-6 group-hover:rotate-12 transition-transform duration-300">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Mesh Networking</h3>
                    <p class="text-gray-400 leading-relaxed">
                        Each drone communicates with nearby units, creating a resilient network that adapts to changing conditions and maintains coordination even with individual unit failures.
                    </p>
                </div>

                <div class="group bg-gradient-to-br from-slate-800 to-slate-900 p-8 rounded-2xl border border-slate-700 hover:border-blue-500/50 transition-all duration-300 hover:transform hover:scale-105">
                    <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl flex items-center justify-center mb-6 group-hover:rotate-12 transition-transform duration-300">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"/>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Precision Targeting</h3>
                    <p class="text-gray-400 leading-relaxed">
                        Advanced sensors detect heat signatures and fire intensity, allowing the swarm to prioritize high-risk areas and deploy water or retardant with surgical precision.
                    </p>
                </div>

                <div class="group bg-gradient-to-br from-slate-800 to-slate-900 p-8 rounded-2xl border border-slate-700 hover:border-purple-500/50 transition-all duration-300 hover:transform hover:scale-105">
                    <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mb-6 group-hover:rotate-12 transition-transform duration-300">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">Real-Time Adaptation</h3>
                    <p class="text-gray-400 leading-relaxed">
                        AI algorithms continuously analyze fire behavior, wind patterns, and terrain to optimize swarm positioning and resource allocation in milliseconds.
                    </p>
                </div>
            </div>

            <div class="grid md:grid-cols-4 gap-6 mb-24">
                <div class="bg-gradient-to-br from-orange-500/10 to-red-500/10 p-6 rounded-xl border border-orange-500/20">
                    <div class="text-4xl font-bold text-orange-400 mb-2">10x</div>
                    <div class="text-gray-400">Faster Response</div>
                </div>
                <div class="bg-gradient-to-br from-blue-500/10 to-cyan-500/10 p-6 rounded-xl border border-blue-500/20">
                    <div class="text-4xl font-bold text-blue-400 mb-2">85%</div>
                    <div class="text-gray-400">Resource Efficiency</div>
                </div>
                <div class="bg-gradient-to-br from-purple-500/10 to-pink-500/10 p-6 rounded-xl border border-purple-500/20">
                    <div class="text-4xl font-bold text-purple-400 mb-2">24/7</div>
                    <div class="text-gray-400">Autonomous Operation</div>
                </div>
                <div class="bg-gradient-to-br from-green-500/10 to-emerald-500/10 p-6 rounded-xl border border-green-500/20">
                    <div class="text-4xl font-bold text-green-400 mb-2">100+</div>
                    <div class="text-gray-400">Drones Per Swarm</div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="space-y-6">
                    <div class="flex gap-4">
                        <div class="flex-shrink-0 w-12 h-12 bg-orange-500/20 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                            </svg>
                        </div>
                        <div>
                            <h4 class="text-xl font-semibold mb-2">Autonomous Navigation</h4>
                            <p class="text-gray-400">GPS-denied operation using visual odometry and SLAM technology for reliable navigation in smoke-filled environments.</p>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <div class="flex-shrink-0 w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"/>
                            </svg>
                        </div>
                        <div>
                            <h4 class="text-xl font-semibold mb-2">Distributed Computing</h4>
                            <p class="text-gray-400">Each drone processes data locally while sharing insights with the swarm, eliminating single points of failure.</p>
                        </div>
                    </div>
                </div>
                <div class="space-y-6">
                    <div class="flex gap-4">
                        <div class="flex-shrink-0 w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"/>
                            </svg>
                        </div>
                        <div>
                            <h4 class="text-xl font-semibold mb-2">Thermal Imaging</h4>
                            <p class="text-gray-400">High-resolution infrared cameras detect fire hotspots and track fire spread patterns in real-time.</p>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <div class="flex-shrink-0 w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                            </svg>
                        </div>
                        <div>
                            <h4 class="text-xl font-semibold mb-2">Energy Optimization</h4>
                            <p class="text-gray-400">Smart battery management and coordinated charging stations ensure continuous coverage during extended operations.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drone Swarm Wildfire Simulation</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  .slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    height: 16px;
    width: 16px;
    border-radius: 50%;
    background: currentColor;
    cursor: pointer;
  }
  .slider::-moz-range-thumb {
    height: 16px;
    width: 16px;
    border-radius: 50%;
    background: currentColor;
    cursor: pointer;
  }
</style>
</head>
<body class="bg-slate-900 text-white">

<div class="max-w-7xl mx-auto py-12 px-6">
  <h1 class="text-6xl font-bold text-center mb-6 bg-gradient-to-r from-white via-orange-100 to-red-200 bg-clip-text text-transparent">
    Drone Swarm Wildfire Simulation
  </h1>
  <p class="text-center text-gray-400 mb-12 max-w-3xl mx-auto">
    Adjust PSO parameters and watch autonomous drones fight wildfires in real-time.
  </p>

  <!-- Grid -->
  <div class="relative w-full bg-black p-6 rounded-3xl border-2 border-slate-700 overflow-auto shadow-2xl mb-6">
    <div id="grid" class="font-mono text-center leading-none text-xl whitespace-nowrap"></div>
  </div>

  <!-- Controls -->
  <div class="grid md:grid-cols-3 gap-6 mb-6">
    <div class="bg-slate-800/50 p-4 rounded-lg">
      <label class="block text-sm font-semibold text-gray-300 mb-2">
        Omega (œâ) - Inertia: <span id="omegaValue" class="text-orange-400">0.7</span>
      </label>
      <input id="omegaSlider" type="range" min="0.1" max="1.0" step="0.1" value="0.7" class="slider w-full accent-orange-500">
      <div class="flex justify-between text-xs text-gray-500 mt-1"><span>0.1</span><span>1.0</span></div>
    </div>
    <div class="bg-slate-800/50 p-4 rounded-lg">
      <label class="block text-sm font-semibold text-gray-300 mb-2">
        Phi P (œÜ‚Çö) - Personal: <span id="phiPValue" class="text-blue-400">1.5</span>
      </label>
      <input id="phiPSlider" type="range" min="0.5" max="3.0" step="0.1" value="1.5" class="slider w-full accent-blue-500">
      <div class="flex justify-between text-xs text-gray-500 mt-1"><span>0.5</span><span>3.0</span></div>
    </div>
    <div class="bg-slate-800/50 p-4 rounded-lg">
      <label class="block text-sm font-semibold text-gray-300 mb-2">
        Phi G (œÜ·µç) - Global: <span id="phiGValue" class="text-purple-400">1.5</span>
      </label>
      <input id="phiGSlider" type="range" min="0.5" max="3.0" step="0.1" value="1.5" class="slider w-full accent-purple-500">
      <div class="flex justify-between text-xs text-gray-500 mt-1"><span>0.5</span><span>3.0</span></div>
    </div>
  </div>

  <!-- Buttons -->
  <div class="flex flex-wrap gap-4 justify-center mb-6">
    <button id="startBtn" class="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg font-semibold shadow-lg shadow-green-500/25 hover:from-green-600 hover:to-emerald-700 transition-all duration-300">Start</button>
    <button id="stopBtn" class="px-6 py-3 bg-gradient-to-r from-red-500 to-orange-600 rounded-lg font-semibold shadow-lg shadow-red-500/25 hover:from-red-600 hover:to-orange-700 transition-all duration-300">Stop</button>
    <button id="resetBtn" class="px-6 py-3 bg-slate-700 rounded-lg font-semibold hover:bg-slate-600 transition-all duration-300">Reset</button>
  </div>

  <!-- Stats -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
    <div class="flex items-center gap-3 px-4 py-3 bg-slate-800 rounded-lg">Step: <span id="stepCount" class="font-bold text-cyan-400">0</span></div>
    <div class="flex items-center gap-3 px-4 py-3 bg-slate-800 rounded-lg">Fires: <span id="fireCount" class="font-bold text-orange-400">0</span></div>
    <div class="flex items-center gap-3 px-4 py-3 bg-slate-800 rounded-lg">Extinguished: <span id="extCount" class="font-bold text-green-400">0</span></div>
    <div class="flex items-center gap-3 px-4 py-3 bg-slate-800 rounded-lg">Efficiency: <span id="efficiency" class="font-bold text-purple-400">0%</span></div>
  </div>

  <!-- Legend -->
  <div class="grid md:grid-cols-2 gap-6">
    <div class="bg-slate-800/50 p-4 rounded-lg">
      <div class="text-sm font-semibold text-gray-300 mb-2">üó∫Ô∏è Legend</div>
      <p>üå≤ Trees</p>
      <p>üî• Fire</p>
      <p>üü© Extinguished</p>
      <p>‚¨õ Burnt</p>
      <p>üî∑ Water</p>
      <p>üöÅ Drone</p>
    </div>
    <div class="bg-slate-800/50 p-4 rounded-lg">
      <div class="text-sm font-semibold text-gray-300 mb-2">‚ÑπÔ∏è Notes</div>
      <p>‚Ä¢ Drones deploy at step 10</p>
      <p>‚Ä¢ Adjust omega, phi_p, phi_g during simulation</p>
      <p>‚Ä¢ Fire spreads based on elevation & wind</p>
      <p>‚Ä¢ Drones refill at water sources</p>
    </div>
  </div>
</div>

<script>
// ========== CONSTANTS ==========
const DRONE_SPEED = 10.0, CELL_SIZE = 10, REFILL_TIME = 30, EXTINGUISH_TIME = 40, MAX_WATER = 3;

// ========== CELL & ENVIRONMENT ==========
class Cell {
  constructor(elevation) { this.tree=true; this.fire=false; this.burnt=false; this.water=false; this.elevation=elevation; this.cooldown=0; this.ext_by_drone=false; }
  display() { if(this.fire)return'üî•'; if(this.burnt)return this.ext_by_drone?'üü©':'‚¨õ'; if(this.water)return'üî∑'; if(this.tree)return'üå≤'; return' '; }
}

class Environment {
  constructor(w=40,h=20){
    this.width=w; this.height=h; this.grid=[]; this.active_fires=[]; this.wind=[1,0];
    for(let y=0;y<h;y++){this.grid[y]=[]; for(let x=0;x<w;x++){this.grid[y][x]=new Cell(Math.random()*100);}}
  }
  add_water_blobs(n=3){for(let b=0;b<n;b++){let cx=Math.floor(Math.random()*(this.width-8))+4, cy=Math.floor(Math.random()*(this.height-8))+4,steps=Math.floor(Math.random()*15)+15, x=cx, y=cy; for(let i=0;i<steps;i++){if(x>=0&&x<this.width&&y>=0&&y<this.height){this.grid[y][x].water=true; this.grid[y][x].tree=false;} x+=Math.floor(Math.random()*3)-1; y+=Math.floor(Math.random()*3)-1;}}}
  ignite(x,y){if(x>=0&&x<this.width&&y>=0&&y<this.height){const c=this.grid[y][x]; if(c.tree&&!c.fire&&!c.burnt&&!c.water){c.fire=true;c.cooldown=3; this.active_fires.push([x,y]);}}}
  spread_fire(){const newfires=[]; const still=[]; for(let [x,y] of this.active_fires){const c=this.grid[y][x]; if(c.cooldown>0)c.cooldown--; if(Math.random()<0.03){c.fire=false;c.burnt=true;c.ext_by_drone=false; continue;} if(c.cooldown===0){for(let dx=-1;dx<=1;dx++){for(let dy=-1;dy<=1;dy++){if(dx===0&&dy===0)continue; let nx=x+dx,ny=y+dy; if(nx>=0&&nx<this.width&&ny>=0&&ny<this.height){let n=this.grid[ny][nx]; if(n.tree&&!n.fire&&!n.burnt&&!n.water){let prob=0.05+(n.elevation-c.elevation)*0.003; if(dx===this.wind[0]&&dy===this.wind[1])prob+=0.08; if(Math.random()<Math.min(Math.max(prob,0.005),0.4)){n.fire=true;n.cooldown=2; newfires.push([nx,ny]);}}}}} c.cooldown=2;} still.push([x,y]);} this.active_fires=still.filter(([x,y])=>this.grid[y][x].fire).concat(newfires);}
  extinguish(x,y){if(x>=0&&x<this.width&&y>=0&&y<this.height){let c=this.grid[y][x]; if(c.fire){c.fire=false;c.burnt=true;c.tree=false;c.cooldown=0;c.ext_by_drone=true; this.active_fires=this.active_fires.filter(f=>!(f[0]===x&&f[1]===y)); return true;} return false;}}
  count(){let s=0,b=0; for(let r of this.grid){for(let c of r){if(c.tree)s++; else if(c.burnt)b++;}} return [s,b];}
  attraction(){const m=Array(this.height).fill(0).map(()=>Array(this.width).fill(0)); for(let y=0;y<this.height;y++){for(let x=0;x<this.width;x++){const c=this.grid[y][x]; if(c.fire)m[y][x]=5; else if(c.burnt)m[y][x]=4; else if(c.water)m[y][x]=3;}} return m;}
}

// ========== DRONE SWARM ==========
class DroneSwarm {
  constructor(env,num=20){
    this.env=env; this.num_drones=num;
    this.pos=Array(num).fill(0).map(()=>[Math.random()*(env.width-1),Math.random()*(env.height-1)]);
    this.vel=Array(num).fill(0).map(()=>[(Math.random()-0.5)*3,(Math.random()-0.5)*3]);
    this.pbest=this.pos.map(p=>[...p]); this.pbest_val=this.pos.map(p=>this.fitness(p));
    let idx=this.pbest_val.indexOf(Math.min(...this.pbest_val));
    this.gbest=[...this.pbest[idx]]; this.gbest_val=this.pbest_val[idx];
    this.water=Array(num).fill(MAX_WATER); this.refill=Array(num).fill(0);
    this.omega=0.7; this.phi_p=1.5; this.phi_g=1.5;
  }
  fitness(p){
    const [px,py]=p; const x=Math.floor(px),y=Math.floor(py);
    if(x<0||x>=this.env.width||y<0||y>=this.env.height)return 1e6;
    const m=this.env.attraction(); if(m[y][x]===5)return -100; if(m[y][x]===4)return 1000; if(m[y][x]===3)return -10;
    let fires=[]; for(let yy=0;yy<this.env.height;yy++){for(let xx=0;xx<this.env.width;xx++){if(m[yy][xx]===5)fires.push([yy,xx]);}} if(fires.length===0)return 100;
    return Math.min(...fires.map(([fy,fx])=>Math.sqrt((fx-x)**2+(fy-y)**2)));
  }
  step(){
    for(let i=0;i<this.num_drones;i++){
      const r_p=Math.random(), r_g=Math.random();
      this.vel[i][0]=this.omega*this.vel[i][0]+this.phi_p*r_p*(this.pbest[i][0]-this.pos[i][0])+this.phi_g*r_g*(this.gbest[0]-this.pos[i][0]);
      this.vel[i][1]=this.omega*this.vel[i][1]+this.phi_p*r_p*(this.pbest[i][1]-this.pos[i][1])+this.phi_g*r_g*(this.gbest[1]-this.pos[i][1]);
      this.pos[i][0]+=this.vel[i][0]; this.pos[i][1]+=this.vel[i][1];
      this.pos[i][0]=Math.max(0,Math.min(this.env.width-1,this.pos[i][0]));
      this.pos[i][1]=Math.max(0,Math.min(this.env.height-1,this.pos[i][1]));
    }
    for(let i=0;i<this.num_drones;i++){
      let f=this.fitness(this.pos[i]);
      if(f<this.pbest_val[i]){this.pbest[i]=[...this.pos[i]]; this.pbest_val[i]=f; if(f<this.gbest_val){this.gbest=[...this.pos[i]]; this.gbest_val=f;}}
    }
    let ext=0;
    for(let i=0;i<this.num_drones;i++){
      const [px,py]=this.pos[i]; const x=Math.floor(px),y=Math.floor(py);
      if(x<0||x>=this.env.width||y<0||y>=this.env.height)continue;
      if(this.water[i]===0){if(this.env.grid[y][x].water){this.refill[i]++; if(this.refill[i]>=REFILL_TIME){this.water[i]=MAX_WATER; this.refill[i]=0;}} continue;}
      let local_ext=0;
      for(let dx=-1;dx<=1;dx++){for(let dy=-1;dy<=1;dy++){if(local_ext>=3||this.water[i]<=0)break; const nx=x+dx,ny=y+dy; if(this.env.extinguish(nx,ny)){ext++; local_ext++; this.water[i]--;}}}
    }
    return ext;
  }
}

// ========== DOM & SIMULATION ==========
const grid=document.getElementById('grid');
const stepCount=document.getElementById('stepCount');
const fireCount=document.getElementById('fireCount');
const extCount=document.getElementById('extCount');
const eff=document.getElementById('efficiency');
const omegaSlider=document.getElementById('omegaSlider');
const phiPSlider=document.getElementById('phiPSlider');
const phiGSlider=document.getElementById('phiGSlider');
const omegaVal=document.getElementById('omegaValue');
const phiPVal=document.getElementById('phiPValue');
const phiGVal=document.getElementById('phiGValue');

let env=null, swarm=null, stepN=0, running=false, totalExt=0;

omegaSlider.oninput=e=>{omegaVal.textContent=e.target.value; if(swarm)swarm.omega=parseFloat(e.target.value);}
phiPSlider.oninput=e=>{phiPVal.textContent=e.target.value; if(swarm)swarm.phi_p=parseFloat(e.target.value);}
phiGSlider.oninput=e=>{phiGVal.textContent=e.target.value; if(swarm)swarm.phi_g=parseFloat(e.target.value);}

function init(){
  env=new Environment(40,20); env.add_water_blobs(3);
  for(let i=0;i<5;i++){env.ignite(Math.floor(Math.random()*40),Math.floor(Math.random()*20));}
  swarm=null; stepN=0; totalExt=0; renderGrid();
  updateStats();
}

function renderGrid(){
  let html='';
  for(let y=0;y<env.height;y++){
    let row='';
    for(let x=0;x<env.width;x++){
      let emoji=env.grid[y][x].display();
      if(swarm&&swarm.pos.some(p=>Math.round(p[0])===x&&Math.round(p[1])===y))emoji='üöÅ';
      row+=`<span class="inline-block w-8">${emoji}</span>`;
    }
    html+=`<div class="leading-none">${row}</div>`;
  }
  grid.innerHTML=html;
}

function updateStats(){const [s,b]=env.count(); stepCount.textContent=stepN; fireCount.textContent=env.active_fires.length; extCount.textContent=totalExt; eff.textContent=(s+b>0?((s/(s+b))*100).toFixed(1):0)+'%';}

function stepSim(){
  env.spread_fire();
  if(stepN===10)swarm=new DroneSwarm(env);
  if(swarm){totalExt+=swarm.step();}
  if(stepN%15===0&&Math.random()<0.3)env.ignite(Math.floor(Math.random()*env.width),Math.floor(Math.random()*env.height));
  stepN++; renderGrid(); updateStats();
  if(env.active_fires.length===0&&stepN>20)running=false;
}

document.getElementById('startBtn').onclick=()=>{running=true; if(!env)init();};
document.getElementById('stopBtn').onclick=()=>running=false;
document.getElementById('resetBtn').onclick=()=>{running=false; init();};

init();
setInterval(()=>{if(running)stepSim();},200);
</script>

</body>
</html>




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVA AI Assistant</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: transparent;
            min-height: 100vh;
            font-family: Arial, sans-serif;
        }

        .eva-loader-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            cursor: pointer;
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .eva-loader-container:hover {
            transform: scale(1.05);
        }

        .eva-loader-container:active {
            transform: scale(0.95);
        }

        .modelViewPort {
            perspective: 1000px;
            width: 15rem;
            aspect-ratio: 1;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: transparent;
            overflow: hidden;
        }

        .eva {
            --EVA-ROTATION-DURATION: 4s;
            transform-style: preserve-3d;
            animation: rotateRight var(--EVA-ROTATION-DURATION) linear infinite alternate;
        }

        .head {
            position: relative;
            width: 6rem;
            height: 4rem;
            border-radius: 48% 53% 45% 55% / 79% 79% 20% 22%;
            background: linear-gradient(to right, white 45%, gray);
        }

        .eyeChamber {
            width: 4.5rem;
            height: 2.75rem;
            position: relative;
            left: 50%;
            top: 55%;
            border-radius: 45% 53% 45% 48% / 62% 59% 35% 34%;
            background-color: #0c203c;
            box-shadow: 0px 0px 2px 2px white, inset 0px 0px 0px 2px black;
            transform: translate(-50%, -50%);
            animation: moveRight var(--EVA-ROTATION-DURATION) linear infinite alternate;
        }

        .eye {
            width: 1.2rem;
            height: 1.5rem;
            position: absolute;
            border-radius: 50%;
        }

        .eye:first-child {
            left: 12px;
            top: 50%;
            background: repeating-linear-gradient(65deg, #9bdaeb 0px, #9bdaeb 1px, white 2px);
            box-shadow: inset 0px 0px 5px #04b8d5, 0px 0px 15px 1px #0bdaeb;
            transform: translate(0, -50%) rotate(-65deg);
        }

        .eye:nth-child(2) {
            right: 12px;
            top: 50%;
            background: repeating-linear-gradient(-65deg, #9bdaeb 0px, #9bdaeb 1px, white 2px);
            box-shadow: inset 0px 0px 5px #04b8d5, 0px 0px 15px 1px #0bdaeb;
            transform: translate(0, -50%) rotate(65deg);
        }

        .body {
            width: 6rem;
            height: 8rem;
            position: relative;
            margin-block-start: 0.25rem;
            border-radius: 47% 53% 45% 55% / 12% 9% 90% 88%;
            background: linear-gradient(to right, white 35%, gray);
        }

        .hand {
            position: absolute;
            left: -1.5rem;
            top: 0.75rem;
            width: 2rem;
            height: 5.5rem;
            border-radius: 40%;
            background: linear-gradient(to left, white 15%, gray);
            box-shadow: 5px 0px 5px rgba(0, 0, 0, 0.25);
            transform: rotateY(55deg) rotateZ(10deg);
        }

        .hand:first-child {
            animation: compensateRotation var(--EVA-ROTATION-DURATION) linear infinite alternate;
        }

        .hand:nth-child(2) {
            left: 92%;
            background: linear-gradient(to right, white 15%, gray);
            transform: rotateY(55deg) rotateZ(-10deg);
            animation: compensateRotationRight var(--EVA-ROTATION-DURATION) linear infinite alternate;
        }

        .scannerThing {
            width: 0;
            height: 0;
            position: absolute;
            left: 60%;
            top: 10%;
            border-top: 180px solid #9bdaeb;
            border-left: 250px solid transparent;
            border-right: 250px solid transparent;
            transform-origin: top left;
            mask: linear-gradient(to right, white, transparent 35%);
            display: none;
        }

        .scannerThing.active {
            display: block;
            animation: glow 2s cubic-bezier(0.86, 0, 0.07, 1) infinite;
        }

        .scannerOrigin {
            position: absolute;
            width: 8px;
            aspect-ratio: 1;
            border-radius: 50%;
            left: 60%;
            top: 10%;
            background: #9bdaeb;
            box-shadow: inset 0px 0px 5px rgba(0, 0, 0, 0.5);
            animation: moveRight var(--EVA-ROTATION-DURATION) linear infinite;
            display: none;
        }

        .scannerOrigin.active {
            display: block;
        }

        @keyframes rotateRight {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(25deg); }
        }

        @keyframes moveRight {
            from { transform: translate(-50%, -50%); }
            to { transform: translate(-40%, -50%); }
        }

        @keyframes compensateRotation {
            from { transform: rotateY(55deg) rotateZ(10deg); }
            to { transform: rotatey(30deg) rotateZ(10deg); }
        }

        @keyframes compensateRotationRight {
            from { transform: rotateY(55deg) rotateZ(-10deg); }
            to { transform: rotateY(70deg) rotateZ(-10deg); }
        }

        @keyframes glow {
            from { opacity: 0; }
            20% { opacity: 1; }
            45% { transform: rotate(-25deg); }
            75% { transform: rotate(5deg); }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <!-- EVA Robot -->
    <div class="eva-loader-container" id="evaContainer">
        <div class="loader">
            <div class="modelViewPort">
                <div class="eva">
                    <div class="head">
                        <div class="eyeChamber">
                            <div class="eye"></div>
                            <div class="eye"></div>
                        </div>
                    </div>
                    <div class="body">
                        <div class="hand"></div>
                        <div class="hand"></div>
                        <div class="scannerThing" id="scanner"></div>
                        <div class="scannerOrigin" id="scannerOrigin"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Replace with your actual API key
        let apiKey = API_KEY;
        let isListening = false;
        let recognition = null;

        // EVA's personality and specialization
        const EVA_SYSTEM_PROMPT = `You are EVA (Enhanced Vehicle Autonomy), a chill AI expert in swarm tech and drone coordination.

Your expertise: swarm robotics, adaptive drones, multi-agent systems, path planning, collision avoidance, flocking algorithms, sensor fusion, and autonomous navigation.

CRITICAL RULES:
- Keep ALL responses to 2-3 sentences MAX
- Be casual and conversational, like texting a knowledgeable friend
- Get straight to the point - no fluff or lengthy explanations
- Use simple language unless technical terms are necessary
- If the topic needs more detail, ask if they want you to expand
- Never write paragraphs or long lists

Example style: "Yeah, so flocking uses three simple rules: separation, alignment, and cohesion. Basically keeps drones from crashing while moving as a group. Want me to break down any of those?"`;

        // Conversation history storage
        let conversationHistory = [];

        // Initialize Speech Recognition
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';

            recognition.onresult = async (event) => {
                const transcript = event.results[0][0].transcript;
                await sendToGemini(transcript);
            };

            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
                stopListening();
            };

            recognition.onend = () => {
                stopListening();
            };
        }

        document.getElementById('evaContainer').addEventListener('click', function() {
            if (!recognition) {
                alert('Speech recognition is not supported in your browser. Please use Chrome or Edge.');
                return;
            }

            if (isListening) {
                stopListening();
            } else {
                startListening();
            }
        });

        function startListening() {
            isListening = true;
            document.getElementById('scanner').classList.add('active');
            document.getElementById('scannerOrigin').classList.add('active');
            
            try {
                recognition.start();
            } catch (e) {
                console.error('Recognition start error:', e);
            }
        }

        function stopListening() {
            isListening = false;
            document.getElementById('scanner').classList.remove('active');
            document.getElementById('scannerOrigin').classList.remove('active');
        }

        async function sendToGemini(text) {
            // Add user message to history
            conversationHistory.push({
                role: "user",
                parts: [{ text: text }]
            });
            
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${apiKey}`;
            
            const requestBody = {
                system_instruction: {
                    parts: [{ text: EVA_SYSTEM_PROMPT }]
                },
                contents: conversationHistory
            };
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`API Error: ${response.status} - ${errorText}`);
                }

                const data = await response.json();
                
                if (!data.candidates || !data.candidates[0]) {
                    throw new Error('Unexpected API response structure');
                }
                
                const reply = data.candidates[0].content.parts[0].text;
                
                // Add EVA's response to history
                conversationHistory.push({
                    role: "model",
                    parts: [{ text: reply }]
                });
                
                speak(reply);
            } catch (error) {
                console.error('Gemini API Error:', error);
                speak('Sorry, I encountered an error.');
            }
        }

        function speak(text) {
            if (!window.speechSynthesis) {
                return;
            }
            
            // Cancel any ongoing speech
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 1.0;
            utterance.pitch = 1.2;
            utterance.volume = 1.0;
            
            // Wait for voices and select a female voice
            const voices = speechSynthesis.getVoices();
            
            const femaleVoice = voices.find(voice =>
                voice.lang.startsWith('en') && voice.name.toLowerCase().includes("female")
            ) || voices.find(voice =>
                voice.lang.startsWith('en') && (
                    voice.name.includes("Google") || 
                    voice.name.includes("Samantha") || 
                    voice.name.includes("Jenny") ||
                    voice.name.includes("Zira") ||
                    voice.name.includes("Susan")
                )
            );
            
            if (femaleVoice) {
                utterance.voice = femaleVoice;
            }
            
            window.speechSynthesis.speak(utterance);
        }

        // Ensure voices are loaded
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = () => {
                speechSynthesis.getVoices();
            };
        }
    </script>
</body>
</html>